---
import Base from "@layouts/Base.astro";
import Default from "@layouts/Default.astro";
import ModelSingle from "@layouts/ModelSingle.astro";
import { getSinglePage } from "@lib/contentParser.astro";

const getModels = await getSingleModel("models");
const modelssSlug = getModels.map((item) => item.slug);

export async function getStaticPaths() {
  const models = await getSingleModel("models");
  const allModels = [...models];

  const paths = allModels.map((model) => ({
    params: {
      regular: model.slug,
    },
    props: { model },
  }));
  return paths;
}

const { model } = Astro.props;
const { name, meta_name, image } = model.data;
---

<Base
  name={name}
  meta_name={meta_name}
  image={image}
>
  {
    postsSlug.includes(model.slug) ? (
      <ModelSingle model={model} />
    ) : (
      <Default data={model} />
    )
  }
</Base>
